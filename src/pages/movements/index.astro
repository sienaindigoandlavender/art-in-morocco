---
import Base from '../../layouts/Base.astro';
import { getMovements } from '../../lib/supabase';
const movements = await getMovements();
---

<Base title="Art Movements in Morocco — Morocco Art Guide" description="From the Casablanca School to contemporary Amazigh art — the movements that defined Moroccan visual culture.">
  <div class="section-inner">
    <div class="page-header">
      <span class="micro-label">Movements</span>
      <h1>Art Movements</h1>
      <p class="page-desc">The ideas and collectives that shaped Moroccan art.</p>
    </div>

    <div class="movements-list">
      {movements.map(m => (
        <a href={`/movements/${m.slug}`} class="movement-row">
          <div class="movement-timeline">
            <span class="movement-period">
              {m.period_start}{m.period_end ? `–${m.period_end}` : '–present'}
            </span>
          </div>
          <div class="movement-content">
            <h2>{m.name}</h2>
            {m.name_ar && <span class="movement-ar">{m.name_ar}</span>}
            {m.description && <p>{m.description}</p>}
          </div>
          <span class="movement-arrow">→</span>
        </a>
      ))}
    </div>
  </div>
</Base>

<style>
  .movements-list { display: flex; flex-direction: column; }
  .movement-row {
    display: grid; grid-template-columns: 160px 1fr 40px; gap: var(--space-md);
    align-items: start; padding: var(--space-md) 0;
    border-bottom: 1px solid var(--color-border);
    transition: background 0.2s;
  }
  .movement-row:first-child { border-top: 1px solid var(--color-border); }
  .movement-row:hover { background: var(--color-surface); }
  .movement-period { font-size: 0.85rem; font-weight: 600; color: var(--color-accent); }
  .movement-content h2 { font-size: 1.4rem; margin-bottom: 0.2rem; }
  .movement-ar { font-size: 0.95rem; color: var(--color-ink-muted); direction: rtl; display: block; margin-bottom: 0.5rem; }
  .movement-content p { font-size: 0.9rem; color: var(--color-ink-light); line-height: 1.5; }
  .movement-arrow { font-size: 1.2rem; color: var(--color-ink-muted); align-self: center; }
  @media (max-width: 768px) {
    .movement-row { grid-template-columns: 1fr 30px; }
    .movement-timeline { display: none; }
  }
</style>
